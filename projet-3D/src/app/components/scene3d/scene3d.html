<div class="scene-container" [class.sidebar-open]="showTestModal">
  <div #canvasContainer class="canvas-container"></div>
  <div class="controls-info">
    <h3>ModÃ©lisation</h3>
    
    <div class="controls-section">
      <h4>ContrÃ´les</h4>
      <button class="reset-button" (click)="resetCameraPosition()">RÃ©initialiser</button>
      <button class="legend-button" (click)="openLegendModal()">Voir la lÃ©gende</button>
      <button class="test-button" (click)="openTestModal()"> Test des Services</button>
      <button class="dimensions-button" (click)="toggleDimensionsInterface()"> Dimensions Temps RÃ©el</button>
      <button class="fenetres-button" (click)="toggleFenetresInterface()"> FenÃªtres Temps RÃ©el</button>
      <button class="murs-button" (click)="toggleMursInterface()"> Murs Temps RÃ©el</button>
      <button class="calculateur-button" (click)="toggleCalculateurFenetres()"> ğŸ§® Calculateur FenÃªtres</button>
      
      <h4>ContrÃ´les Souris</h4>
      <ul>
        <li><strong>Clic + Glisser</strong> : Rotation autour de la construction</li>
        <li><strong>Molette</strong> : Zoom avant/arriÃ¨re (5-50)</li>
        <li><strong>Clic droit</strong> : DÃ©sactivÃ©</li>
      </ul>
    </div>


  <!-- Modale de lÃ©gende -->
  <div class="modal-overlay" [class.show]="showLegendModal" (click)="closeLegendModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>LÃ©gende de la ModÃ©lisation 3D</h2>
        <button class="close-button" (click)="closeLegendModal()">&times;</button>
      </div>
      
      <div class="modal-body">
        <div class="legend-section">
          <h3>Architecture du BÃ¢timent</h3>
          <div class="building-info">
            <div class="info-card">
              <h4>Dimensions GÃ©nÃ©rales</h4>
              <ul>
                <li><strong>Longueur :</strong> 8 m</li>
                <li><strong>Largeur :</strong> 5 m</li>
                <li><strong>Hauteur :</strong> 2.5 m</li>
                <li><strong>Ã‰paisseur des murs :</strong> 0.20 m</li>
              </ul>
            </div>
            
            <div class="info-card">
              <h4>Ã‰lÃ©ments Structurels</h4>
              <ul>
                <li><strong>Sol :</strong> Plateforme de base (8m Ã— 5m Ã— 0.20m)</li>
                <li><strong>Toit :</strong> Couverture (8.4m Ã— 5m Ã— 0.20m)</li>
                <li><strong>Murs :</strong> 4 murs formant un rectangle</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="legend-section">
          <h3>Ouvertures et AccÃ¨s</h3>
          <div class="openings-info">
            <div class="opening-card door">
              <div class="opening-icon">ğŸšª</div>
              <div class="opening-details">
                <h4>Porte d'EntrÃ©e</h4>
                <ul>
                  <li><strong>Position :</strong> Mur principal </li>
                  <li><strong>Dimensions :</strong> 1m Ã— 2.1m</li>
                  <li><strong>Couleur :</strong> Vert</li>
                  <li><strong>Epaisseur:</strong> 0.05m</li>
                </ul>
              </div>
            </div>

            <div class="opening-card window">
              <div class="opening-icon">ğŸªŸ</div>
              <div class="opening-details">
                <h4>FenÃªtre 1</h4>
                <ul>
                  <li><strong>Position :</strong> Mur principal (faÃ§ade)</li>
                  <li><strong>Dimensions :</strong> 1.5m Ã— 1.2m</li>
                  <li><strong>Couleur :</strong> Rouge</li>
                  <li><strong>Epaisseur:</strong> 0.05m</li>
                </ul>
              </div>
            </div>

            <div class="opening-card window">
              <div class="opening-icon">ğŸªŸ</div>
              <div class="opening-details">
                <h4>FenÃªtre 2</h4>
                <ul>
                  <li><strong>Position :</strong> Mur principal (faÃ§ade)</li>
                  <li><strong>Dimensions :</strong> 2m Ã— 1.2m</li>
                  <li><strong>Couleur :</strong> Rouge</li>
                  <li><strong>Epaisseur:</strong> 0.05m</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="legend-section">
          <h3>Code Couleurs</h3>
          <div class="color-legend">
            <div class="color-item">
              <div class="color-box color-walls"></div>
              <span><strong>Murs :</strong> Gris clair (#aaaaaa)</span>
            </div>
            <div class="color-item">
              <div class="color-box color-door"></div>
              <span><strong>Porte :</strong> Vert (#00ff00)</span>
            </div>
            <div class="color-item">
              <div class="color-box color-windows"></div>
              <span><strong>FenÃªtres :</strong> Rouge (#ff0000)</span>
            </div>
            <div class="color-item">
              <div class="color-box color-ground"></div>
              <span><strong>Sol :</strong> Marron foncÃ© (#2E1E1A)</span>
            </div>
            <div class="color-item">
              <div class="color-box color-roof"></div>
              <span><strong>Toit :</strong> Bleu royal (#4169e1)</span>
            </div>
          </div>
        </div>

        <div class="legend-section">
          <h3> ContrÃ´les de Navigation</h3>
          <div class="controls-legend">
            <div class="control-item">
              <div class="control-icon">ğŸ–±ï¸</div>
              <div class="control-text">
                <strong>Clic + Glisser :</strong> Rotation autour du bÃ¢timent
              </div>
            </div>
            <div class="control-item">
              <div class="control-icon">ğŸ¯</div>
              <div class="control-text">
                <strong>Molette :</strong> Zoom avant/arriÃ¨re (5-50 unitÃ©s)
              </div>
            </div>
            <div class="control-item">
              <div class="control-icon">ğŸ”„</div>
              <div class="control-text">
                <strong>Bouton RÃ©initialiser :</strong> Retour Ã  la vue initiale
              </div>
            </div>
          </div>
        </div>

        <div class="legend-section">
          <h3>ğŸ“ SystÃ¨me de CoordonnÃ©es</h3>
          <div class="coordinates-info">
            <div class="axis-info">
              <div class="axis-color axis-x"></div>
              <span><strong>Axe X (Rouge) :</strong> Gauche/Droite</span>
            </div>
            <div class="axis-info">
              <div class="axis-color axis-y"></div>
              <span><strong>Axe Y (Vert) :</strong> Bas/Haut</span>
            </div>
            <div class="axis-info">
              <div class="axis-color axis-z"></div>
              <span><strong>Axe Z (Bleu) :</strong> Avant/ArriÃ¨re</span>
            </div>
          </div>
        </div>

        <div class="legend-section">
          <h3>ğŸ’¡ Techniques UtilisÃ©es</h3>
          <div class="tech-info">
            <div class="tech-card">
              <h4>Three.js</h4>
              <p>BibliothÃ¨que JavaScript pour la crÃ©ation de graphiques 3D dans le navigateur</p>
            </div>
            <div class="tech-card">
              <h4>ExtrudeGeometry</h4>
              <p>Technique utilisÃ©e pour crÃ©er de vraies ouvertures dans les murs (trous)</p>
            </div>
            <div class="tech-card">
              <h4>Configuration CentralisÃ©e</h4>
              <p>Toutes les dimensions et couleurs sont dÃ©finies dans un fichier de configuration (building-config.ts)</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="close-modal-btn" (click)="closeLegendModal()">Fermer</button>
      </div>
    </div>
  </div>
</div>


<!-- Sidebar de test des services -->
<div class="sidebar-overlay" [class.show]="showTestModal" (click)="closeTestModal($event)">
  <div class="sidebar-content test-sidebar" (click)="$event.stopPropagation()">
    <div class="sidebar-header">
      <h2> Test des Services</h2>
      <button class="sidebar-close" (click)="closeTestModal($event)">Ã—</button>
    </div>
    <div class="sidebar-body">
      <!-- Section des tests de base -->
      <div class="test-section">
        <h3>Tests de Base</h3>
        <div class="test-buttons">
          <button (click)="testStatistiques()" class="btn-test btn-blue">
            <div class="btn-icon"></div>
            <div class="btn-label">Statistiques</div>
          </button>
          <button (click)="testExport()" class="btn-test btn-purple">
            <div class="btn-icon"></div>
            <div class="btn-label">Export</div>
          </button>
          <button (click)="testValidation()" class="btn-test btn-red">
            <div class="btn-icon"></div>
            <div class="btn-label">Synchroniser</div>
          </button>
        </div>
      </div>

      <!-- Section des tests de couleurs automatiques -->
      <div class="test-section">
        <h3> Tests de Couleurs Automatiques</h3>
        <!-- <div class="test-buttons">
          <button (click)="testCouleurs()" class="btn-test btn-orange">
            <div class="btn-icon"></div>
            <div class="btn-label">Couleurs Murs</div>
          </button>
          <button (click)="testCouleursOuvertures()" class="btn-test btn-cyan">
            <div class="btn-icon"></div>
            <div class="btn-label">Couleurs Ouvertures</div>
          </button>
        </div> -->
      </div>

      <!-- Section du sÃ©lecteur de couleurs interactif -->
      <div class="test-section">
        <h3> SÃ©lecteur de Couleurs Interactif</h3>
        
        <!-- SÃ©lecteur de couleurs -->
        <div class="color-picker-section">
          <div class="color-picker-container">
            <label for="colorPicker">Choisir une couleur :</label>
            <div class="color-input-group">
              <input type="color" id="colorPicker" [(ngModel)]="selectedColor" (change)="onColorChange()" class="color-picker">
              <span class="color-value">{{selectedColor}}</span>
            </div>
          </div>
        </div>

        <!-- SÃ©lection des Ã©lÃ©ments -->
        <div class="element-selection-section">
          <div class="element-group">
            <h4> Murs</h4>
            <div class="element-buttons">
              <button (click)="changeElementColor('principal')" class="btn-element" [class.active]="selectedElement === 'principal'">
                <div class="element-icon"></div>
                <div class="element-label">Mur Principal</div>
              </button>
              <button (click)="changeElementColor('arriere')" class="btn-element" [class.active]="selectedElement === 'arriere'">
                <div class="element-icon"></div>
                <div class="element-label">Mur ArriÃ¨re</div>
              </button>
              <button (click)="changeElementColor('gauche')" class="btn-element" [class.active]="selectedElement === 'gauche'">
                <div class="element-icon"></div>
                <div class="element-label">Mur Gauche</div>
              </button>
              <button (click)="changeElementColor('droit')" class="btn-element" [class.active]="selectedElement === 'droit'">
                <div class="element-icon"></div>
                <div class="element-label">Mur Droit</div>
              </button>
            </div>
          </div>

          <div class="element-group">
            <h4> Ouvertures</h4>
            <div class="element-buttons">
              <button (click)="changeElementColor('fenetre2')" class="btn-element" [class.active]="selectedElement === 'fenetre2'">
                <div class="element-icon"></div>
                <div class="element-label">FenÃªtre Principale</div>
    </button>
              <button (click)="changeElementColor('fenetre3')" class="btn-element" [class.active]="selectedElement === 'fenetre3'">
                <div class="element-icon"></div>
                <div class="element-label">FenÃªtre ArriÃ¨re</div>
    </button>
              <button (click)="changeElementColor('porte1')" class="btn-element" [class.active]="selectedElement === 'porte1'">
                <div class="element-icon"></div>
                <div class="element-label">Porte d'EntrÃ©e</div>
    </button>
            </div>
          </div>
  </div>
  
        <!-- Actions -->
        <div class="color-actions-section">
          <button (click)="resetAllColors()" class="btn-reset">
            <div class="btn-icon"></div>
            <div class="btn-text">Remettre les couleurs originales</div>
    </button>
        </div>
      </div>

      <!-- Section de communication -->
      <!-- <div class="test-section">
        <h3>ğŸ“¡ Communication</h3>
        <!-- Bouton de rechargement de configuration -->
        <div class="reload-section">
          <button (click)="rechargerConfigurationDepuisFichier()" class="btn-reload">
            ğŸ”„ Recharger Configuration
          </button>
          <p class="reload-description">
            Modifiez building-config.ts puis cliquez pour voir les changements
          </p>
        </div>

        <div class="test-buttons">
          <button (click)="testCommunication()" class="btn-test btn-gray">
            <div class="btn-icon">ğŸ“¡</div>
            <div class="btn-label">Communication</div>
          </button>
          <button (click)="testMateriaux()" class="btn-test btn-purple">
            <div class="btn-icon">ğŸ¨</div>
            <div class="btn-label">MatÃ©riaux</div>
          </button>
          <button (click)="testScene()" class="btn-test btn-indigo">
            <div class="btn-icon">ğŸ¬</div>
            <div class="btn-label">ScÃ¨ne 3D</div>
          </button>
          <button (click)="testMurs()" class="btn-test btn-brown">
            <div class="btn-icon">ğŸ§±</div>
            <div class="btn-label">Murs</div>
          </button>
          <button (click)="testModificationsMurs()" class="btn-test btn-orange">
            <div class="btn-icon">ğŸ”§</div>
            <div class="btn-label">Modifications</div>
          </button>
          <button (click)="testMiseAJourRendu()" class="btn-test btn-teal">
            <div class="btn-icon">ğŸ”„</div>
            <div class="btn-label">Test Rendu</div>
          </button>
          <button (click)="testModificationOuverture()" class="btn-test btn-pink">
            <div class="btn-icon">ğŸ”§</div>
            <div class="btn-label">Test Modif</div>
          </button>
          <button (click)="testModificationComplete()" class="btn-test btn-indigo">
            <div class="btn-icon">ğŸ—ï¸</div>
            <div class="btn-label">Test Complet</div>
          </button>
        </div>
  </div> -->
  

      <!-- Modificateur de murs interactif -->
      <div class="mur-modifier-section">
        <h3>ğŸ”§ Modificateur de Murs Interactif</h3>
        
        <div class="mur-selector">
          <h4>Choisissez un mur Ã  modifier :</h4>
          <div class="mur-buttons">
            <button 
              class="btn-mur" 
              [class.active]="selectedMur === 'principal'"
              (click)="selectMur('principal')"
            >
              ğŸ§± Mur Principal
            </button>
            <button 
              class="btn-mur" 
              [class.active]="selectedMur === 'arriere'"
              (click)="selectMur('arriere')"
            >
              ğŸ§± Mur ArriÃ¨re
            </button>
            <button 
              class="btn-mur" 
              [class.active]="selectedMur === 'gauche'"
              (click)="selectMur('gauche')"
            >
              ğŸ§± Mur Gauche
            </button>
            <button 
              class="btn-mur" 
              [class.active]="selectedMur === 'droit'"
              (click)="selectMur('droit')"
            >
              ğŸ§± Mur Droit
            </button>
          </div>
        </div>

        <div class="mur-properties" *ngIf="selectedMur">
          <h4>PropriÃ©tÃ©s du {{ selectedMur === 'principal' ? 'Mur Principal' : selectedMur === 'arriere' ? 'Mur ArriÃ¨re' : selectedMur === 'gauche' ? 'Mur Gauche' : 'Mur Droit' }} :</h4>
          
          <!-- Position -->
          <div class="property-group">
            <h5>ğŸ“ Position (X, Y, Z) :</h5>
            <div class="input-group">
              <input 
                type="number" 
                [(ngModel)]="murPosition.x" 
                step="0.1" 
                placeholder="X"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="murPosition.y" 
                step="0.1" 
                placeholder="Y"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="murPosition.z" 
                step="0.1" 
                placeholder="Z"
                class="number-input"
              >
              <button (click)="modifierPositionMur()" class="btn-apply">
                âœ… Appliquer Position
              </button>
            </div>
          </div>

          <!-- Dimensions -->
          <div class="property-group">
            <h5>ğŸ“ Dimensions (Largeur, Hauteur, Profondeur) :</h5>
            <div class="input-group">
              <input 
                type="number" 
                [(ngModel)]="murDimensions.width" 
                step="0.1" 
                placeholder="Largeur"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="murDimensions.height" 
                step="0.1" 
                placeholder="Hauteur"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="murDimensions.depth" 
                step="0.1" 
                placeholder="Profondeur"
                class="number-input"
              >
              <button (click)="modifierDimensionsMur()" class="btn-apply">
                âœ… Appliquer Dimensions
              </button>
            </div>
          </div>

          <!-- Ã‰paisseur -->
          <div class="property-group">
            <h5>ğŸ“ Ã‰paisseur :</h5>
            <div class="input-group">
              <input 
                type="number" 
                [(ngModel)]="murEpaisseur" 
                step="0.01" 
                placeholder="Ã‰paisseur"
                class="number-input"
              >
              <button (click)="modifierEpaisseurMur()" class="btn-apply">
                âœ… Appliquer Ã‰paisseur
              </button>
            </div>
          </div>

          <!-- Couleur -->
          <div class="property-group">
            <h5>ğŸ¨ Couleur :</h5>
            <div class="input-group">
              <label for="murColorPicker" class="sr-only">SÃ©lecteur de couleur du mur</label>
              <input 
                type="color" 
                id="murColorPicker"
                [(ngModel)]="murCouleur"
                class="color-input"
                title="SÃ©lecteur de couleur du mur"
              >
              <span class="color-display">{{ murCouleur }}</span>
              <button (click)="modifierCouleurMurInteractive()" class="btn-apply">
                âœ… Appliquer Couleur
              </button>
            </div>
          </div>

          <!-- Actions globales -->
          <div class="mur-actions">
            <button (click)="appliquerModificationsMur()" class="btn-apply-all">
              ğŸš€ Appliquer Toutes les Modifications
            </button>
            <button (click)="resetMurValues()" class="btn-reset">
              ğŸ”„ RÃ©initialiser
            </button>
          </div>
        </div>
      </div>

      <!-- Zone de sortie des tests -->
      <div class="test-output-section">
        <h3>ğŸ“Š RÃ©sultats des Tests</h3>
        <div id="services-output" class="test-output">
          <div class="success-message">âœ… Services intÃ©grÃ©s avec succÃ¨s!</div>
    <div>Cliquez sur les boutons pour tester les fonctionnalitÃ©s.</div>
        </div>
      </div>

      <!-- ===== NOUVELLES SECTIONS D'INTERFACE COMPLÃˆTE ===== -->

      <!-- Section Modificateur d'Ouvertures -->
      <div class="test-section">
        <h3>ğŸšª Modificateur d'Ouvertures</h3>
        
        <div class="ouverture-selector">
          <h4>Choisissez une ouverture Ã  modifier :</h4>
          <div class="ouverture-buttons">
            <button 
              class="btn-ouverture" 
              [class.active]="selectedOuverture === 'fenetre1'"
              (click)="selectOuverture('fenetre1')"
            >
              ğŸªŸ FenÃªtre 1
            </button>
            <button 
              class="btn-ouverture" 
              [class.active]="selectedOuverture === 'fenetre2'"
              (click)="selectOuverture('fenetre2')"
            >
              ğŸªŸ FenÃªtre 2
            </button>
            <button 
              class="btn-ouverture" 
              [class.active]="selectedOuverture === 'porte1'"
              (click)="selectOuverture('porte1')"
            >
              ğŸšª Porte 1
            </button>
          </div>
        </div>

        <div class="ouverture-properties" *ngIf="selectedOuverture">
          <h4>PropriÃ©tÃ©s de l'ouverture :</h4>
          
          <!-- Type et Nom -->
          <div class="property-group">
            <h5>ğŸ“ Type et Nom :</h5>
            <div class="input-group">
              <select [(ngModel)]="ouvertureType" class="select-input" title="Type d'ouverture" aria-label="Type d'ouverture">
                <option value="fenetre">FenÃªtre</option>
                <option value="porte">Porte</option>
              </select>
              <input 
                type="text" 
                [(ngModel)]="ouvertureNom" 
                placeholder="Nom de l'ouverture"
                class="text-input"
              >
            </div>
          </div>

          <!-- Position -->
          <div class="property-group">
            <h5>ğŸ“ Position (X, Y, Z) :</h5>
            <div class="input-group">
              <input 
                type="number" 
                [(ngModel)]="ouverturePosition.x" 
                step="0.1" 
                placeholder="X"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="ouverturePosition.y" 
                step="0.1" 
                placeholder="Y"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="ouverturePosition.z" 
                step="0.1" 
                placeholder="Z"
                class="number-input"
              >
              <button (click)="modifierPositionOuverture()" class="btn-apply">
                âœ… Appliquer Position
              </button>
            </div>
          </div>

          <!-- Dimensions -->
          <div class="property-group">
            <h5>ğŸ“ Dimensions (Largeur, Hauteur, Profondeur) :</h5>
            <div class="input-group">
              <input 
                type="number" 
                [(ngModel)]="ouvertureDimensions.width" 
                step="0.1" 
                placeholder="Largeur"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="ouvertureDimensions.height" 
                step="0.1" 
                placeholder="Hauteur"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="ouvertureDimensions.depth" 
                step="0.01" 
                placeholder="Profondeur"
                class="number-input"
              >
              <button (click)="modifierDimensionsOuverture()" class="btn-apply">
                âœ… Appliquer Dimensions
              </button>
            </div>
          </div>

          <!-- Couleur -->
          <div class="property-group">
            <h5>ğŸ¨ Couleur :</h5>
            <div class="input-group">
              <input 
                type="color" 
                [(ngModel)]="ouvertureCouleur"
                class="color-input"
                title="Couleur de l'ouverture"
                aria-label="Couleur de l'ouverture"
              >
              <span class="color-display">{{ ouvertureCouleur }}</span>
              <button (click)="modifierCouleurOuvertureInteractive()" class="btn-apply">
                âœ… Appliquer Couleur
              </button>
            </div>
          </div>

          <!-- Actions -->
          <div class="ouverture-actions">
            <button (click)="ajouterOuverture()" class="btn-add">
              â• Ajouter Ouverture
            </button>
            <button (click)="supprimerOuverture()" class="btn-delete">
              ğŸ—‘ï¸ Supprimer
            </button>
            <button (click)="resetOuvertureValues()" class="btn-reset">
              ğŸ”„ RÃ©initialiser
            </button>
          </div>
        </div>
      </div>

      <!-- Section Modificateur de Structure -->
      <div class="test-section">
        <h3>ğŸ—ï¸ Modificateur de Structure</h3>
        
        <div class="structure-properties">
          <!-- Nom et Description -->
          <div class="property-group">
            <h5>ğŸ“ Informations GÃ©nÃ©rales :</h5>
            <div class="input-group">
              <input 
                type="text" 
                [(ngModel)]="structureNom" 
                placeholder="Nom du bÃ¢timent"
                class="text-input"
              >
              <textarea 
                [(ngModel)]="structureDescription" 
                placeholder="Description du bÃ¢timent"
                class="textarea-input"
                rows="2"
              ></textarea>
            </div>
          </div>

          <!-- Dimensions Globales -->
          <div class="property-group">
            <h5>Dimensions Globales (m) :</h5>
            <div class="input-group">
              <input 
                type="number" 
                [(ngModel)]="structureDimensions.longueur" 
                step="0.1" 
                placeholder="Longueur"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="structureDimensions.largeur" 
                step="0.1" 
                placeholder="Largeur"
                class="number-input"
              >
              <input 
                type="number" 
                [(ngModel)]="structureDimensions.hauteur" 
                step="0.1" 
                placeholder="Hauteur"
                class="number-input"
              >
              <button (click)="modifierStructureDimensions()" class="btn-apply">
                Appliquer Dimensions
              </button>
            </div>
          </div>

          <!-- Actions -->
          <div class="structure-actions">
            <button (click)="resetStructureValues()" class="btn-reset">
              RÃ©initialiser Structure
            </button>
          </div>
        </div>
      </div>


      <!-- Section Validation en Temps RÃ©el -->
      <div class="test-section">
        <h3>Validation en Temps RÃ©el</h3>
        
        <div class="validation-panel">
          <!-- Score de Validation -->
          <div class="validation-score">
            <h5>Score de Validation :</h5>
            <div class="score-display" [class]="'score-' + (scoreValidation >= 80 ? 'good' : scoreValidation >= 60 ? 'warning' : 'error')">
              {{ scoreValidation }}/100
            </div>
          </div>

          <!-- Erreurs -->
          <div class="validation-errors" *ngIf="erreursValidation.length > 0">
            <h5>âŒ Erreurs :</h5>
            <ul>
              <li *ngFor="let erreur of erreursValidation">{{ erreur }}</li>
            </ul>
          </div>

          <!-- Avertissements -->
          <div class="validation-warnings" *ngIf="avertissementsValidation.length > 0">
            <h5>âš ï¸ Avertissements :</h5>
            <ul>
              <li *ngFor="let avertissement of avertissementsValidation">{{ avertissement }}</li>
            </ul>
          </div>

          <!-- Actions -->
          <div class="validation-actions">
            <button (click)="validerConfiguration()" class="btn-validate">
              Valider Configuration
            </button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Interface de Dimensions en Temps RÃ©el -->
<div class="dimensions-overlay" [class.show]="showDimensionsInterface" (click)="toggleDimensionsInterface()">
  <div class="dimensions-content" (click)="$event.stopPropagation()">
    <div class="dimensions-header">
      <h2>ğŸ“ Dimensions en Temps RÃ©el</h2>
      <button class="dimensions-close" (click)="toggleDimensionsInterface()">Ã—</button>
    </div>
    
    <div class="dimensions-body">
      <!-- ContrÃ´les de mise Ã  jour -->
      <div class="realtime-controls">
        <div class="control-group">
          <label class="control-label">
            <input type="checkbox" [(ngModel)]="isRealTimeUpdate" (change)="toggleRealTimeUpdate()">
            âš¡ Mise Ã  jour en temps rÃ©el
          </label>
        </div>
        
        <div class="control-actions" *ngIf="!isRealTimeUpdate">
          <button (click)="appliquerDimensionsManuellement()" class="btn-apply">
            âœ… Appliquer les Dimensions
          </button>
        </div>
      </div>

      <!-- ContrÃ´les des dimensions -->
      <div class="dimensions-controls">
        <h3>ğŸ—ï¸ Dimensions du BÃ¢timent</h3>
        
        <!-- Longueur -->
        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Longueur (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="2" 
              max="20" 
              step="0.1" 
              [(ngModel)]="dimensionsReelTemps.longueur"
              (input)="onDimensionsChange()"
              class="dimension-slider"
              title="Longueur du bÃ¢timent"
              aria-label="Longueur du bÃ¢timent"
            >
            <input 
              type="number" 
              min="2" 
              max="20" 
              step="0.1" 
              [(ngModel)]="dimensionsReelTemps.longueur"
              (input)="onDimensionsChange()"
              class="dimension-input"
              title="Longueur du bÃ¢timent"
              aria-label="Longueur du bÃ¢timent"
              placeholder="Longueur"
            >
            <span class="dimension-value">{{ dimensionsReelTemps.longueur }}m</span>
          </div>
        </div>

        <!-- Largeur -->
        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Largeur (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="2" 
              max="15" 
              step="0.1" 
              [(ngModel)]="dimensionsReelTemps.largeur"
              (input)="onDimensionsChange()"
              class="dimension-slider"
              title="Largeur du bÃ¢timent"
              aria-label="Largeur du bÃ¢timent"
            >
            <input 
              type="number" 
              min="2" 
              max="15" 
              step="0.1" 
              [(ngModel)]="dimensionsReelTemps.largeur"
              (input)="onDimensionsChange()"
              class="dimension-input"
              title="Largeur du bÃ¢timent"
              aria-label="Largeur du bÃ¢timent"
              placeholder="Largeur"
            >
            <span class="dimension-value">{{ dimensionsReelTemps.largeur }}m</span>
          </div>
        </div>

        <!-- Hauteur -->
        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Hauteur (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="1" 
              max="10" 
              step="0.1" 
              [(ngModel)]="dimensionsReelTemps.hauteur"
              (input)="onDimensionsChange()"
              class="dimension-slider"
              title="Hauteur du bÃ¢timent"
              aria-label="Hauteur du bÃ¢timent"
            >
            <input 
              type="number" 
              min="1" 
              max="10" 
              step="0.1" 
              [(ngModel)]="dimensionsReelTemps.hauteur"
              (input)="onDimensionsChange()"
              class="dimension-input"
              title="Hauteur du bÃ¢timent"
              aria-label="Hauteur du bÃ¢timent"
              placeholder="Hauteur"
            >
            <span class="dimension-value">{{ dimensionsReelTemps.hauteur }}m</span>
          </div>
        </div>
      </div>

      <!-- Informations actuelles -->
      <div class="dimensions-info">
        <h3>ğŸ“Š Informations Actuelles</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">Surface au sol :</span>
            <span class="info-value">{{ (dimensionsReelTemps.longueur * dimensionsReelTemps.largeur).toFixed(1) }} mÂ²</span>
          </div>
          <div class="info-item">
            <span class="info-label">Volume :</span>
            <span class="info-value">{{ (dimensionsReelTemps.longueur * dimensionsReelTemps.largeur * dimensionsReelTemps.hauteur).toFixed(1) }} mÂ³</span>
          </div>
          <div class="info-item">
            <span class="info-label">PÃ©rimÃ¨tre :</span>
            <span class="info-value">{{ (2 * (dimensionsReelTemps.longueur + dimensionsReelTemps.largeur)).toFixed(1) }} m</span>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="dimensions-actions">
        <button (click)="chargerDimensionsActuelles()" class="btn-load">
          ğŸ“¥ Charger Dimensions Actuelles
        </button>
        <button (click)="resetDimensionsReelTemps()" class="btn-reset">
          ğŸ”„ RÃ©initialiser
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Interface des FenÃªtres en Temps RÃ©el -->
<div class="fenetres-overlay" [class.show]="showFenetresInterface" (click)="toggleFenetresInterface()">
  <div class="fenetres-content" (click)="$event.stopPropagation()">
    <div class="fenetres-header">
      <h2>ğŸªŸ FenÃªtres en Temps RÃ©el</h2>
      <button class="fenetres-close" (click)="toggleFenetresInterface()">Ã—</button>
    </div>
    
    <div class="fenetres-body">
      <!-- ContrÃ´les de mise Ã  jour -->
      <div class="realtime-controls">
        <div class="control-group">
          <label class="control-label">
            <input type="checkbox" [(ngModel)]="isRealTimeUpdate" (change)="toggleRealTimeUpdate()">
            âš¡ Mise Ã  jour en temps rÃ©el
          </label>
        </div>
        
        <div class="control-actions" *ngIf="!isRealTimeUpdate">
          <button (click)="mettreAJourFenetresReelTemps()" class="btn-apply">
            âœ… Appliquer les Modifications
          </button>
        </div>
      </div>

      <!-- ContrÃ´les des fenÃªtres -->
      <div class="fenetres-controls">
        <h3>ğŸªŸ PropriÃ©tÃ©s des FenÃªtres</h3>
        
        <!-- Dimensions -->
        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Largeur (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="0.5" 
              max="3" 
              step="0.1" 
              [(ngModel)]="fenetresReelTemps.longueur"
              (input)="onFenetresChange()"
              class="dimension-slider"
              title="Largeur de la fenÃªtre"
              aria-label="Largeur de la fenÃªtre"
            >
            <input 
              type="number" 
              min="0.5" 
              max="3" 
              step="0.1" 
              [(ngModel)]="fenetresReelTemps.longueur"
              (input)="onFenetresChange()"
              class="dimension-input"
              title="Largeur de la fenÃªtre"
              aria-label="Largeur de la fenÃªtre"
              placeholder="Largeur"
            >
            <span class="dimension-value">{{ fenetresReelTemps.longueur }}m</span>
          </div>
        </div>

        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Profondeur (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="0.05" 
              max="0.5" 
              step="0.01" 
              [(ngModel)]="fenetresReelTemps.largeur"
              (input)="onFenetresChange()"
              class="dimension-slider"
              title="Profondeur de la fenÃªtre"
              aria-label="Profondeur de la fenÃªtre"
            >
            <input 
              type="number" 
              min="0.05" 
              max="0.5" 
              step="0.01" 
              [(ngModel)]="fenetresReelTemps.largeur"
              (input)="onFenetresChange()"
              class="dimension-input"
              title="Profondeur de la fenÃªtre"
              aria-label="Profondeur de la fenÃªtre"
              placeholder="Profondeur"
            >
            <span class="dimension-value">{{ fenetresReelTemps.largeur }}m</span>
          </div>
        </div>

        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Hauteur (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="0.5" 
              max="3" 
              step="0.1" 
              [(ngModel)]="fenetresReelTemps.hauteur"
              (input)="onFenetresChange()"
              class="dimension-slider"
              title="Hauteur de la fenÃªtre"
              aria-label="Hauteur de la fenÃªtre"
            >
            <input 
              type="number" 
              min="0.5" 
              max="3" 
              step="0.1" 
              [(ngModel)]="fenetresReelTemps.hauteur"
              (input)="onFenetresChange()"
              class="dimension-input"
              title="Hauteur de la fenÃªtre"
              aria-label="Hauteur de la fenÃªtre"
              placeholder="Hauteur"
            >
            <span class="dimension-value">{{ fenetresReelTemps.hauteur }}m</span>
          </div>
        </div>

        <!-- Couleur -->
        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ¨ Couleur
          </label>
          <div class="dimension-control">
            <input 
              type="color" 
              [(ngModel)]="fenetresReelTemps.couleur"
              (input)="onFenetresChange()"
              class="color-input"
              title="Couleur de la fenÃªtre"
              aria-label="Couleur de la fenÃªtre"
            >
            <span class="dimension-value">{{ fenetresReelTemps.couleur }}</span>
          </div>
        </div>

        <!-- Type et Nom -->
        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Type et Nom
          </label>
          <div class="dimension-control">
            <select [(ngModel)]="fenetresReelTemps.type" (change)="onFenetresChange()" class="select-input" title="Type de fenÃªtre" aria-label="Type de fenÃªtre">
              <option value="fenetre">FenÃªtre</option>
              <option value="porte">Porte</option>
            </select>
            <input 
              type="text" 
              [(ngModel)]="fenetresReelTemps.nom"
              (input)="onFenetresChange()"
              placeholder="Nom de la fenÃªtre"
              class="text-input"
              title="Nom de la fenÃªtre"
              aria-label="Nom de la fenÃªtre"
            >
          </div>
        </div>
      </div>

      <!-- Informations actuelles -->
      <div class="fenetres-info">
        <h3>ğŸ“Š Informations Actuelles</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">Surface :</span>
            <span class="info-value">{{ (fenetresReelTemps.longueur * fenetresReelTemps.hauteur).toFixed(2) }} mÂ²</span>
          </div>
          <div class="info-item">
            <span class="info-label">Volume :</span>
            <span class="info-value">{{ (fenetresReelTemps.longueur * fenetresReelTemps.largeur * fenetresReelTemps.hauteur).toFixed(3) }} mÂ³</span>
          </div>
          <div class="info-item">
            <span class="info-label">PÃ©rimÃ¨tre :</span>
            <span class="info-value">{{ (2 * (fenetresReelTemps.longueur + fenetresReelTemps.hauteur)).toFixed(2) }} m</span>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="fenetres-actions">
        <button (click)="chargerFenetresActuelles()" class="btn-load">
          ğŸ“¥ Charger PropriÃ©tÃ©s Actuelles
        </button>
        <button (click)="resetFenetresReelTemps()" class="btn-reset">
          ğŸ”„ RÃ©initialiser
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Interface des Murs en Temps RÃ©el -->
<div class="murs-overlay" [class.show]="showMursInterface" (click)="toggleMursInterface()">
  <div class="murs-content" (click)="$event.stopPropagation()">
    <div class="murs-header">
      <h2>ğŸ§± Murs en Temps RÃ©el</h2>
      <button class="murs-close" (click)="toggleMursInterface()">Ã—</button>
    </div>
    
    <div class="murs-body">
      <!-- ContrÃ´les de mise Ã  jour -->
      <div class="realtime-controls">
        <div class="control-group">
          <label class="control-label">
            <input type="checkbox" [(ngModel)]="isRealTimeUpdate" (change)="toggleRealTimeUpdate()">
            âš¡ Mise Ã  jour en temps rÃ©el
          </label>
        </div>
        
        <div class="control-actions" *ngIf="!isRealTimeUpdate">
          <button (click)="mettreAJourMursReelTemps()" class="btn-apply">
            âœ… Appliquer les Modifications
          </button>
        </div>
      </div>

      <!-- ContrÃ´les des murs -->
      <div class="murs-controls">
        <h3>ğŸ§± PropriÃ©tÃ©s des Murs</h3>
        
        <!-- Dimensions -->
        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Longueur Murs Principal/ArriÃ¨re (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="2" 
              max="20" 
              step="0.1" 
              [(ngModel)]="mursReelTemps.longueur"
              (input)="onMursChange()"
              class="dimension-slider"
              title="Longueur du mur"
              aria-label="Longueur du mur"
            >
            <input 
              type="number" 
              min="2" 
              max="20" 
              step="0.1" 
              [(ngModel)]="mursReelTemps.longueur"
              (input)="onMursChange()"
              class="dimension-input"
              title="Longueur du mur"
              aria-label="Longueur du mur"
              placeholder="Longueur"
            >
            <span class="dimension-value">{{ mursReelTemps.longueur }}m</span>
          </div>
        </div>

        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Largeur Murs LatÃ©raux (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="2" 
              max="15" 
              step="0.1" 
              [(ngModel)]="mursReelTemps.largeur"
              (input)="onMursChange()"
              class="dimension-slider"
              title="Largeur des murs latÃ©raux"
              aria-label="Largeur des murs latÃ©raux"
            >
            <input 
              type="number" 
              min="2" 
              max="15" 
              step="0.1" 
              [(ngModel)]="mursReelTemps.largeur"
              (input)="onMursChange()"
              class="dimension-input"
              title="Largeur des murs latÃ©raux"
              aria-label="Largeur des murs latÃ©raux"
              placeholder="Largeur"
            >
            <span class="dimension-value">{{ mursReelTemps.largeur }}m</span>
          </div>
        </div>

        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Hauteur (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="1" 
              max="10" 
              step="0.1" 
              [(ngModel)]="mursReelTemps.hauteur"
              (input)="onMursChange()"
              class="dimension-slider"
              title="Hauteur du mur"
              aria-label="Hauteur du mur"
            >
            <input 
              type="number" 
              min="1" 
              max="10" 
              step="0.1" 
              [(ngModel)]="mursReelTemps.hauteur"
              (input)="onMursChange()"
              class="dimension-input"
              title="Hauteur du mur"
              aria-label="Hauteur du mur"
              placeholder="Hauteur"
            >
            <span class="dimension-value">{{ mursReelTemps.hauteur }}m</span>
          </div>
        </div>

        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ“ Ã‰paisseur (m)
          </label>
          <div class="dimension-control">
            <input 
              type="range" 
              min="0.1" 
              max="1" 
              step="0.01" 
              [(ngModel)]="mursReelTemps.epaisseur"
              (input)="onMursChange()"
              class="dimension-slider"
              title="Ã‰paisseur du mur"
              aria-label="Ã‰paisseur du mur"
            >
            <input 
              type="number" 
              min="0.1" 
              max="1" 
              step="0.01" 
              [(ngModel)]="mursReelTemps.epaisseur"
              (input)="onMursChange()"
              class="dimension-input"
              title="Ã‰paisseur du mur"
              aria-label="Ã‰paisseur du mur"
              placeholder="Ã‰paisseur"
            >
            <span class="dimension-value">{{ mursReelTemps.epaisseur }}m</span>
          </div>
        </div>

        <!-- Couleur -->
        <div class="dimension-group">
          <label class="dimension-label">
            ğŸ¨ Couleur
          </label>
          <div class="dimension-control">
            <input 
              type="color" 
              [(ngModel)]="mursReelTemps.couleur"
              (input)="onMursChange()"
              class="color-input"
              title="Couleur du mur"
              aria-label="Couleur du mur"
            >
            <span class="dimension-value">{{ mursReelTemps.couleur }}</span>
          </div>
        </div>
      </div>

      <!-- Informations actuelles -->
      <div class="murs-info">
        <h3>ğŸ“Š Informations Actuelles</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">Surface :</span>
            <span class="info-value">{{ (mursReelTemps.longueur * mursReelTemps.hauteur).toFixed(1) }} mÂ²</span>
          </div>
          <div class="info-item">
            <span class="info-label">Volume :</span>
            <span class="info-value">{{ (mursReelTemps.longueur * mursReelTemps.epaisseur * mursReelTemps.hauteur).toFixed(2) }} mÂ³</span>
          </div>
          <div class="info-item">
            <span class="info-label">PÃ©rimÃ¨tre :</span>
            <span class="info-value">{{ (2 * (mursReelTemps.longueur + mursReelTemps.hauteur)).toFixed(1) }} m</span>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="murs-actions">
        <button (click)="chargerMursActuels()" class="btn-load">
          ğŸ“¥ Charger PropriÃ©tÃ©s Actuelles
        </button>
        <button (click)="resetMursReelTemps()" class="btn-reset">
          ğŸ”„ RÃ©initialiser
        </button>
      </div>
    </div>
  </div>
</div>

<!-- =============================================== -->
<!-- CALCULATEUR DE FENÃŠTRES INTÃ‰GRÃ‰ -->
<!-- =============================================== -->
<div class="calculateur-overlay" *ngIf="showCalculateurFenetres">
  <div class="calculateur-content">
    <div class="calculateur-header">
      <h2>ğŸ§® Calculateur de FenÃªtres Intelligent</h2>
      <button (click)="toggleCalculateurFenetres()" class="btn-close">âœ•</button>
    </div>

    <!-- SÃ©lection du mur -->
    <div class="calculateur-section">
      <h3>ğŸ“ SÃ©lection du Mur</h3>
      <select 
        [(ngModel)]="murSelectionneCalculateur" 
        (change)="onMurSelectionneCalculateur()" 
        class="form-control"
        title="Choisir le mur sur lequel ajouter des fenÃªtres"
        aria-label="SÃ©lection du mur">
        <option value="">-- Choisir un mur --</option>
        <option value="principal">Mur Principal (FaÃ§ade) - 8m Ã— 2.5m</option>
        <option value="arriere">Mur ArriÃ¨re - 8m Ã— 2.5m</option>
        <option value="gauche">Mur Gauche - 5m Ã— 2.5m</option>
        <option value="droit">Mur Droit - 5m Ã— 2.5m</option>
      </select>
    </div>

    <!-- ParamÃ¨tres des fenÃªtres -->
    <div class="calculateur-section" *ngIf="murSelectionneCalculateur">
      <h3>ğŸªŸ ParamÃ¨tres des FenÃªtres</h3>
      
      <div class="parametres-grid">
        <div class="parametre-item">
          <label>Taille des fenÃªtres:</label>
          <select 
            [(ngModel)]="parametresFenetres.tailleFenetre" 
            (change)="onParametresFenetresChange()"
            class="form-control"
            title="Choisir la taille des fenÃªtres"
            aria-label="Taille des fenÃªtres">
            <option value="petit">Petit (0.8m Ã— 1.0m)</option>
            <option value="moyen">Moyen (1.5m Ã— 1.2m)</option>
            <option value="grand">Grand (2.5m Ã— 1.8m)</option>
          </select>
        </div>

        <div class="parametre-item">
          <label>Ã‰cart entre fenÃªtres (m):</label>
          <input 
            type="range" 
            [(ngModel)]="parametresFenetres.ecart" 
            [min]="0.1" 
            [max]="2.0" 
            [step]="0.1"
            (input)="onParametresFenetresChange()"
            class="slider"
            title="Espacement entre les fenÃªtres en mÃ¨tres"
            aria-label="Ã‰cart entre fenÃªtres">
          <span class="valeur">{{ parametresFenetres.ecart }}m</span>
        </div>

        <div class="parametre-item">
          <label>Nombre de fenÃªtres souhaitÃ©es:</label>
          <input 
            type="number" 
            [(ngModel)]="parametresFenetres.nombreFenetres" 
            [min]="0" 
            [max]="20"
            (input)="onParametresFenetresChange()"
            class="number-input"
            title="Nombre de fenÃªtres Ã  ajouter"
            aria-label="Nombre de fenÃªtres">
        </div>

        <div class="parametre-item">
          <label>Couleur des fenÃªtres:</label>
          <input 
            type="color" 
            [(ngModel)]="parametresFenetres.couleur"
            class="color-input"
            title="Couleur des fenÃªtres"
            aria-label="Couleur des fenÃªtres">
        </div>
      </div>
    </div>

    <!-- RÃ©sultats du calcul -->
    <div class="calculateur-section" *ngIf="calculResultat">
      <h3>ğŸ“Š RÃ©sultats du Calcul</h3>
      
      <div class="resultats" [class.valid]="calculResultat.isValid" [class.invalid]="!calculResultat.isValid">
        <div class="statut">
          <span class="icone">{{ calculResultat.isValid ? 'âœ…' : 'âŒ' }}</span>
          <span class="message">{{ calculResultat.message }}</span>
        </div>
        
        <div class="details" *ngIf="calculResultat.isValid">
          <div class="detail-item">
            <strong>Nombre max de fenÃªtres:</strong> {{ calculResultat.nombreMaxFenetres }}
          </div>
          <div class="detail-item">
            <strong>Largeur totale utilisÃ©e:</strong> {{ calculResultat.largeurTotaleUtilisee.toFixed(2) }}m
          </div>
          <div class="detail-item">
            <strong>Marge restante:</strong> {{ calculResultat.margeRestante.toFixed(2) }}m
          </div>
        </div>
      </div>

      <!-- Positions calculÃ©es -->
      <div class="positions" *ngIf="calculResultat.positionsCalculees.length > 0">
        <h4>ğŸ“ Positions CalculÃ©es</h4>
        <div class="position-list">
          <div 
            *ngFor="let position of calculResultat.positionsCalculees; let i = index" 
            class="position-item">
            <span class="numero">FenÃªtre {{ i + 1 }}:</span>
            <span class="coordonnees">
              X: {{ position.x.toFixed(2) }}m, 
              Y: {{ position.y.toFixed(2) }}m, 
              Z: {{ position.z.toFixed(2) }}m
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="calculateur-actions" *ngIf="calculResultat && calculResultat.isValid">
      <button 
        (click)="genererConfigurationFenetres()" 
        class="btn btn-primary"
        [disabled]="parametresFenetres.nombreFenetres > calculResultat.nombreMaxFenetres"
        title="GÃ©nÃ©rer le code de configuration">
        ğŸš€ GÃ©nÃ©rer Configuration
      </button>
      
      <button 
        (click)="optimiserDimensionsFenetres()" 
        class="btn btn-secondary"
        title="Optimiser automatiquement les dimensions">
        âš¡ Optimiser Dimensions
      </button>

      <button 
        (click)="appliquerConfigurationDirecte()" 
        class="btn btn-success"
        [disabled]="!configurationGeneree"
        title="Appliquer directement au modÃ¨le 3D">
        ğŸ¯ Appliquer au ModÃ¨le
      </button>
    </div>

    <!-- Configuration gÃ©nÃ©rÃ©e -->
    <div class="calculateur-section" *ngIf="configurationGeneree">
      <h3>âš™ï¸ Configuration GÃ©nÃ©rÃ©e</h3>
      <div class="config-code">
        <pre>{{ configurationGeneree }}</pre>
      </div>
      <button (click)="copierConfigurationFenetres()" class="btn btn-info">ğŸ“‹ Copier</button>
    </div>
  </div>
</div>
